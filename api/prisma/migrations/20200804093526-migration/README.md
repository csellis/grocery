# Migration `20200804093526-migration`

This migration has been generated by Chris Ellis at 8/4/2020, 9:35:26 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_UserItem" (
"categoryId" INTEGER NOT NULL  ,"categoryName" TEXT NOT NULL  ,"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,"id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,"itemId" INTEGER NOT NULL  ,"itemName" TEXT NOT NULL  ,"picked" BOOLEAN NOT NULL DEFAULT false ,"updatedAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,"userId" TEXT NOT NULL  ,FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE)

INSERT INTO "quaint"."new_UserItem" ("createdAt", "id", "itemId", "itemName", "picked", "updatedAt", "userId") SELECT "createdAt", "id", "itemId", "itemName", "picked", "updatedAt", "userId" FROM "quaint"."UserItem"

PRAGMA foreign_keys=off;
DROP TABLE "quaint"."UserItem";;
PRAGMA foreign_keys=on

ALTER TABLE "quaint"."new_UserItem" RENAME TO "UserItem";

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200804091932-migration..20200804093526-migration
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource DS {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider      = "prisma-client-js"
@@ -40,13 +40,15 @@
   items UserItem[]
 }
 model UserItem {
-  id        Int      @id @default(autoincrement())
-  user      User     @relation(fields: [userId], references: [id])
-  userId    String
-  itemName  String
-  itemId    Int
-  picked    Boolean  @default(false)
-  createdAt DateTime @default(now())
-  updatedAt DateTime @default(now())
+  id           Int      @id @default(autoincrement())
+  user         User     @relation(fields: [userId], references: [id])
+  userId       String
+  itemName     String
+  itemId       Int
+  categoryName String
+  categoryId   Int
+  picked       Boolean  @default(false)
+  createdAt    DateTime @default(now())
+  updatedAt    DateTime @default(now())
 }
```


