# Migration `20200723141317-migration`

This migration has been generated by Chris Ellis at 7/23/2020, 2:13:17 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."UserExample" (
"email" TEXT NOT NULL  ,"id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,"name" TEXT   )

CREATE TABLE "quaint"."Item" (
"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,"id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,"name" TEXT NOT NULL  ,"published" BOOLEAN NOT NULL DEFAULT true ,"updatedAt" DATE NOT NULL  )

CREATE TABLE "quaint"."User" (
"email" TEXT NOT NULL  ,"id" TEXT NOT NULL  ,"name" TEXT   ,
    PRIMARY KEY ("id"))

CREATE TABLE "quaint"."ItemsOnUser" (
"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,"itemId" INTEGER NOT NULL  ,"picked" BOOLEAN NOT NULL DEFAULT false ,"userId" TEXT NOT NULL  ,
    PRIMARY KEY ("itemId","userId"),FOREIGN KEY ("itemId") REFERENCES "Item"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE)

CREATE UNIQUE INDEX "quaint"."UserExample.email" ON "UserExample"("email")

CREATE UNIQUE INDEX "quaint"."User.email" ON "User"("email")

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200723141317-migration
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,45 @@
+datasource DS {
+  provider = "sqlite"
+  url = "***"
+}
+
+generator client {
+  provider      = "prisma-client-js"
+  binaryTargets = env("BINARY_TARGET")
+}
+
+// Define your own datamodels here and run `yarn redwood db save` to create
+// migrations for them.
+// TODO: Please remove the following example:
+model UserExample {
+  id    Int     @id @default(autoincrement())
+  email String  @unique
+  name  String?
+}
+
+model Item {
+  id        Int           @id @default(autoincrement())
+  name      String
+  published Boolean       @default(true)
+  createdAt DateTime      @default(now())
+  updatedAt DateTime      @updatedAt
+  users     ItemsOnUser[]
+}
+
+model User {
+  id    String        @id @default(uuid())
+  email String        @unique
+  name  String?
+  items ItemsOnUser[]
+}
+
+model ItemsOnUser {
+  item      Item     @relation(fields: [itemId], references: [id])
+  itemId    Int
+  user      User     @relation(fields: [userId], references: [id])
+  userId    String
+  createdAt DateTime @default(now())
+  picked    Boolean  @default(false)
+
+  @@id([itemId, userId])
+}
```


